<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" dir="ltr"><!--<![endif]-->
	<head>
<!-- Based on CDTS 4.0.45 (https://cenw-wscoe.github.io/sgdc-cdts/docs/index-en.html) with DECoE customizations added (look for "DECoE customization" in comments) -->
	 <meta charset="utf-8">

<!-- Start DECoE customization -->
		<title>
			NCL Licence Area - Innovation, Science, and Economic Development Canada
		</title>
<!-- End DECoE customization -->

		<meta content="width=device-width,initial-scale=1" name="viewport">
		<script src="https://ssl-templates.services.gc.ca/app/cls/WET/gcweb/v4_0_45/cdts/compiled/wet-en.js"></script>
		<noscript>
			<!-- Write closure fall-back static file -->
			<!-- refTop.html -->
			<!--[if gte IE 9 | !IE ]><!-->
			<link href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/wet-boew/assets/favicon.ico" rel="icon" type="image/x-icon">
			<link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/wet-boew/css/theme.min.css">
			<link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/cdts/cdtsfixes.css">
			
			<!--<![endif]-->
			<!--[if lt IE 9]>
			<link href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/wet-boew/assets/favicon.ico" rel="shortcut icon">
			<link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/wet-boew/css/ie8-theme.min.css">
			<![endif]-->
			<link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/cdts/cdtsapps.css">
			<link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/css/noscript.min.css">
			<link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/cdts/cdtsnoscript.css">
		</noscript>
		<!-- Write closure template -->
		<script>
			document.write(wet.builder.refTop({
				"cdnEnv": "esdcprod"
			}));
		</script>

<!-- Start DECoE customization -->
<link rel="stylesheet" href="libs/leaflet.css"/>
    <link rel="stylesheet" href="src/leaflet.draw.css"/>

    <script src="libs/leaflet-src.js"></script>

    <script src="src/Leaflet.draw.js"></script>
    <script src="src/Leaflet.Draw.Event.js"></script>

    <script src="src/edit/handler/Edit.Poly.js"></script>
    <script src="src/edit/handler/Edit.SimpleShape.js"></script>
    <script src="src/edit/handler/Edit.Rectangle.js"></script>
    <script src="src/edit/handler/Edit.Marker.js"></script>
    <script src="src/edit/handler/Edit.CircleMarker.js"></script>
    <script src="src/edit/handler/Edit.Circle.js"></script>

    <script src="src/draw/handler/Draw.Feature.js"></script>
    <script src="src/draw/handler/Draw.Polyline.js"></script>
    <script src="src/draw/handler/Draw.Polygon.js"></script>
    <script src="src/draw/handler/Draw.SimpleShape.js"></script>
    <script src="src/draw/handler/Draw.Rectangle.js"></script>
    <script src="src/draw/handler/Draw.Circle.js"></script>
    <script src="src/draw/handler/Draw.Marker.js"></script>
    <script src="src/draw/handler/Draw.CircleMarker.js"></script>

    <script src="src/ext/TouchEvents.js"></script>
    <script src="src/ext/LatLngUtil.js"></script>
    <script src="src/ext/GeometryUtil.js"></script>
    <script src="src/ext/LineUtil.Intersect.js"></script>
    <script src="src/ext/Polyline.Intersect.js"></script>
    <script src="src/ext/Polygon.Intersect.js"></script>

    <script src="src/Control.Draw.js"></script>
    <script src="src/Tooltip.js"></script>
    <script src="src/Toolbar.js"></script>

    <script src="src/draw/DrawToolbar.js"></script>
    <script src="src/edit/EditToolbar.js"></script>
    <script src="src/edit/handler/EditToolbar.Edit.js"></script>
    <script src="src/edit/handler/EditToolbar.Delete.js"></script>
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>

	<script src="https://unpkg.com/esri-leaflet"></script>

    <!-- Esri Leaflet Geocoder -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css"
    />
    <script src="https://unpkg.com/esri-leaflet-geocoder"></script>



		<link rel="stylesheet" href="https://www.ic.gc.ca/eic/home.nsf/css/add_WET_4-0_Canada_Apps.css">
		<style>
		/* Styles for all mockups */
			.panel-footer .btn:not(.btn-link) {
				min-width: 6.5em;
			}
			.notesaboutmockup {
				color: #333;
				background: #FFD;
				padding: 0 1em;
				border-color: #FC6;
				border-width: 2px;
				border-style: solid;
			}
			.notesaboutmockup h2 {
				font-size: inherit;
				margin-top: 1em;
			}
		/* Styles for this mockup */
			
		</style>
		<script>
			document.addEventListener( 'DOMContentLoaded', function () {
				$("#results").hide()
				document.getElementById('search').addEventListener( 'click', function () {
					$("#results").show()
					$('#back').hide()
				}, false )
			}, false )
		</script>
<!-- End DECoE customization -->

	</head>
	<body vocab="http://schema.org/" typeof="WebPage">
		<div id="def-top">
			<!-- Write closure fall-back static file -->
			<!-- appTop-en.html -->
			<nav aria-label="Skip Links">
			<ul id="wb-tphp">
			<li class="wb-slc"><a class="wb-sl" href="#wb-cont">Skip to main content</a></li>
			<li class="wb-slc visible-xs visible-sm visible-md visible-lg"><a class="wb-sl" href="#wb-info">Skip to "About this Web application"</a></li>
			</ul>
			</nav>
			<header>
			<div id="wb-bnr" class="container">
			<div class="row">
			<div class="brand col-xs-9 col-sm-5 col-md-4" property="publisher" typeof="GovernmentOrganization">
			<img src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/wet-boew/assets/sig-blk-en.svg" alt="Government of Canada" property="logo">
			<span class="wb-inv"> / <span lang="fr">Gouvernement du Canada</span></span>
			<meta property="name" content="Government of Canada">
			<meta property="areaServed" typeof="Country" content="Canada">
			<link property="logo" href="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/wet-boew/assets/wmms-blk.svg">
			</div>
			</div>
			</div>
			<div class="app-bar">
			<div class="container">
			<div class="row">
			<section class="col-xs-12">
			<h2 class="wb-inv">Name of Web application</h2>
			<a class="app-name" href="#YourApplicationName">Name of Web application</a>
			</section>
			</div>
			</div>
			</div>
			</header>
		</div>
		<!-- Write closure template -->
		<script>
			var defTop = document.getElementById("def-top");
			defTop.outerHTML = wet.builder.top({
				"cdnEnv": "esdcprod",
				"lngLinks": [{
					"lang": "fr",
					"href": "SLAB-fr.shtml",
					"text": "FranÃ§ais"
				}],
				"search": false,
				"siteMenu": false,
				"showPreContent": false
			});
		</script>
		<main property="mainContentOfPage" typeof="WebPageElement" class="container">

<!-- Start page heading -->
<h1 property="name" id="wb-cont">Non-Competitive Local Licence Application (01000139-001)</h1>
<!-- End page heading -->

<h2>Licence Area</h2>

<p>Enter your licence area coordinates (maximum 12) by using the draw tool on the interactive map or by entering them manually in a table.</p>

<div class="row wb-frm">

<!-- Start page content -->
<div style="display:flex; align-items:center; justify-content: center; height: 100%;width: 100%;">
    <div id="map" style="width: 1200px; height: 600px; border: 1px solid #ccc"></div>
    </div>
</div>
<!-- End page content -->

			<div id="def-preFooter">
				<!-- Write closure fall-back static file -->
				<!-- preFooter-en.html -->
				<div class="pagedetails">
				<div class="row">
				<div class="col-sm-6 col-md-5 col-lg-4">
				<a href="https://www.canada.ca/en/report-problem.html" class="btn btn-default btn-center">Report a problem on this page</a>
				</div>
				</div>
				<dl id="wb-dtmd">
				<dt>Date modified:&#32;</dt>
				<dd><time property="dateModified">2023-05-25</time></dd>
				</dl>
				</div>
			</div>
			<!-- Write closure template -->
			<script>
				var defPreFooter = document.getElementById("def-preFooter");
				defPreFooter.outerHTML = wet.builder.preFooter({
					"cdnEnv": "esdcprod",
					"dateModified": "2023-05-19",
					"showPostContent": false,
					"showFeedback": false,
					"showShare": false
				});
			</script>
		</main>
		<div id="def-footer">
			<!-- Write closure fall-back static file -->
			<!-- appFooter-en.html -->
			<footer id="wb-info">
			<div class="brand">
			<div class="container">
			<div class="row">
			<nav class="col-md-10 ftr-urlt-lnk" aria-labelledby="aboutWebApp">
			<h2 class="wb-inv" id="aboutWebApp">About this Web application</h2>
			<ul>
			<li><a href="https://www.canada.ca/en/contact.html">Contact information</a></li>
			<li><a href="https://www.canada.ca/en/transparency/terms.html">Terms and conditions</a></li>
			<li><a href="https://www.canada.ca/en/transparency/privacy.html">Privacy</a></li>
			</ul>
			</nav>
			<div class="col-xs-6 visible-sm visible-xs tofpg">
			<a href="#wb-cont">Top of Page <span class="glyphicon glyphicon-chevron-up"></span></a>
			</div>
			<div class="col-xs-6 col-md-3 col-lg-2 text-right">
			<img src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_45/wet-boew/assets/wmms-blk.svg" alt="Symbol of the Government of Canada">
			</div>
			</div>
			</div>
			</div>
			</footer>
		</div>
		<!-- Write closure template -->
        <script>
            var osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                    osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    osm = L.tileLayer(osmUrl, {maxZoom: 18, attribution: osmAttrib}),
                    map = new L.Map('map', {zoomControl:false, layers: [osm], center: new L.LatLng(45.424721
        , -75.695000), zoom: 15,selectedPathOptions: {
                color:'#ff9900'
                }});
        
            var drawnItems = new L.FeatureGroup();
            map.addLayer(drawnItems);
        
            new L.Control.Zoom({ position: 'bottomright' }).addTo(map);
        
            new L.Control.Fullscreen({position: 'topright'}).addTo(map);

			const baseLayers = {
				'Standard': osm,
				'Terrain': osm
			};

			const urban = L.layerGroup();
			const metro = L.layerGroup();
			const rural = L.layerGroup();
			const remote = L.layerGroup();
			const feezone = L.layerGroup();

			const overlays = {
				'Fee Zones': feezone,
			};

			const layerControl = L.control.layers(baseLayers, overlays, {position: 'topleft'});
        
            var drawControl = new L.Control.Draw({
                position: 'topleft',
                draw: {
                    polyline: false,
                    polygon: true,
                    circle: false,
                    rectangle: false,
                    marker: false,
                    circlemarker: false,
                polygon: {
                        allowIntersection: false,
                        showArea: true,
                        maxPoints:12,
                metric: "km",
                precision: {km:5},
                shapeOptions: {
                        fillColor :'#bf00ff',
                    fillOpacity:0.65,
                    color:"#8600b3",
                    opacity: 1
                          }
                }
        
                },
            });
        
			var searchControl = L.esri.Geocoding.geosearch({
				expanded: true,
        	})

			map.addControl(searchControl)
            map.addControl(drawControl);
			map.addControl(layerControl);

            var scale = L.control.scale(); // Creating scale control
                 scale.addTo(map); // Adding scale control to the map
        
        
        
            L.Control.RemoveAll = L.Control.extend({
                options: {
                    position: 'topleft',
                },
        
                onAdd: function (map) {
                    var controlDiv = L.DomUtil.create('div', 'leaflet-control leaflet-bar');
                    var controlUI = L.DomUtil.create('a', 'leaflet-draw-edit-remove', controlDiv);
                    controlUI.title = 'Remove all drawn items';
                    controlUI.setAttribute('href', '#');

                    controlUI.style.backgroundImage = 'url(src/images/trash.svg)'
        
                    L.DomEvent
                        .addListener(controlUI, 'click', L.DomEvent.stopPropagation)
                        .addListener(controlUI, 'click', L.DomEvent.preventDefault)
                        .addListener(controlUI, 'click', function () {
                            drawnItems.clearLayers();
                            map.removeControl(removeAllControl);
							map.removeControl(layerControl);
            				map.addControl(drawControl);
							map.addControl(layerControl);
                        });
                    return controlDiv;
                }
            });
        
        removeAllControl = new L.Control.RemoveAll();
        
        L.marker([45, 5], {icon: L.divIcon({className: 'poi', html: '<b>ðŸš°</b>'})}).addTo(map);
        
        
        
        
        var getPopupContent = function(layer) {
        
                  // Rectangle/Polygon - area
                  var latlngs = layer._defaultShape ? layer._defaultShape() : layer.getLatLngs(),
                  area = L.GeometryUtil.geodesicArea(latlngs);
                  return "Area: "+ parseFloat(L.GeometryUtil.readableArea(area, true, 5).slice(0, -3))/100 + " square kilometer";
        
                };
        
        // TODO : on mouseout finish the polygon
        
        // on draw
            map.on(L.Draw.Event.CREATED, function (e) {
                var type = e.layerType,
                        layer = e.layer;
						
            map.removeControl(drawControl);
			map.removeControl(layerControl);
            map.addControl(removeAllControl);
			layerControl.addTo(map);
            layer.on('mouseover', function (event) {
                layer.bindPopup(getPopupContent(layer)).openPopup();
            });
            layer.on('mouseout', function (event) {
                layer.bindPopup(getPopupContent(layer)).closePopup();
            });
        
            
            
        
            layer.on(L.Draw.Event.EDITVERTEX, function(e){
                console.log(layer.getLatLngs()[0])
            })
        
            layer.editing.enable()
        
            drawnItems.addLayer(layer);
            
            drawnItems.setStyle({fillColor :'#33cc33',
                    fillOpacity:0.65,
                    color:"#248f24",
                    opacity: 1})
            
            });
        
            map.on(L.Draw.Event.EDITVERTEX, function(e){
                console.log(e)
                console.log(e.layers.getLayers()[0])
            })
        
         
           map.on(L.Draw.Event.DELETED, function (e) {
        
            if (Object.keys(e.layers._layers).length != 0) {
                map.removeControl(removeAllControl);
				map.removeControl(layerControl);
                map.addControl(drawControl);
				layerControl.addTo(map);
            }
        
            
        });
        
        </script>
		<script>
			var defFooter = document.getElementById("def-footer");
			defFooter.outerHTML = wet.builder.footer({
				"cdnEnv": "esdcprod",
				"showFooter": false,
				"showFeatures": false,

				"contactLinks": [{
					"href": "#",
					"newWindow": true
				}],
				"termsLink": [{
					"href": "#"
				}],
				"privacyLink": [{
					"newWindow": true
				}]
			});
		</script>
		<!-- Write closure template -->
		<script>
			document.write(wet.builder.refFooter({
				"cdnEnv": "esdcprod"
			}));
		</script>
	</body>
</html>